dependencies {
    compileOnly project(":encoding")
    api project(":api")

    implementation "com.squareup:javapoet:$javapoet_version"
    compileOnly "org.immutables:value:$immutables_version"
    annotationProcessor "org.immutables:value:$immutables_version"

    api "io.projectreactor.addons:reactor-extra"

    api "com.fasterxml.jackson.core:jackson-databind:$jackson_version"
    api "com.fasterxml.jackson.datatype:jackson-datatype-jdk8:$jackson_version"

    compileOnly "javax.annotation:javax.annotation-api:$javax_annotation"

    testImplementation "org.junit.jupiter:junit-jupiter-engine:$junit_version"
}

task updateSchemas(dependsOn: classes, type: JavaExec){
    mainClass = 'telegram4j.tl.SchemaUpdater'
    classpath = sourceSets.main.runtimeClasspath
    standardInput = System.in
    workingDir = project.rootDir
    if (project.hasProperty("args")) {
        args project.getProperties()["args"]
    }
}
